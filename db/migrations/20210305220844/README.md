# Migration `20210305220844`

This migration has been generated by James Johnson at 3/5/2021, 5:08:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Card" (
"id" SERIAL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "author" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "content" TEXT NOT NULL,
    "picture" TEXT,
    "uuid" TEXT NOT NULL,
    "eventId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Event" (
"id" SERIAL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "name" TEXT NOT NULL,
    "creator" TEXT NOT NULL,
    "recipient" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Card.uuid_unique" ON "Card"("uuid")

ALTER TABLE "Card" ADD FOREIGN KEY("eventId")REFERENCES "Event"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201129043016..20210305220844
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Card {
   id        Int      @id @default(autoincrement())
@@ -13,18 +13,17 @@
   author    String
   title     String
   content   String
   picture   String?
-  uuid      String  @unique
-  eventUUID String
-  event     Event    @relation(fields: [eventUUID], references: [uuid])
+  uuid      String   @unique
+  eventId   Int
+  event     Event    @relation(fields: [eventId], references: [id])
 }
 model Event {
   id        Int      @id @default(autoincrement())
   createdAt DateTime @default(now())
   name      String
   creator   String
   recipient String
-  uuid      String   @unique
   cards     Card[]
 }
```


